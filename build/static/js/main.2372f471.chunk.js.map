{"version":3,"sources":["core/Point.ts","core/Coordinate.ts","core/Enemy/EnemySet.ts","core/Bullet/Bullet.ts","core/tool/index.ts","core/Hero/Hero.ts","core/Hero/GrapeshotHero.ts","core/Bullet/SpecialLightningBullet.ts","core/Hero/LightningHero.ts","core/Bullet/SniperBullet.ts","core/Hero/SniperHero.ts","core/Enemy/Enemy.ts","core/Round/Round1.ts","core/index.ts","App.tsx","reportWebVitals.ts","index.tsx","App.module.css"],"names":["Point","x","y","coordinate","this","origin","p","p1","toNumber","p2","Coordinate","EnemySet","array","matrix","set","Set","enemy","delete","map","_enemy","row","callbackfn","forEach","predicate","some","items","item","add","push","size","i","random","Math","floor","length","k","keys","result","next","value","point","Bullet","ctx","DefaultBullet","direction","game","hero","speed","color","isEnd","cos","sin","enemySet","findEnemyByPoint","hited","addKillNumber","removeBullet","height","width","beginPath","moveTo","lineTo","gnt1","createLinearGradient","addColorStop","strokeStyle","stroke","closePath","drawRoundRect","w","h","r","arcTo","drawLightning","lightColor","pn1x","pn1y","dx","dy","l","lengthTo","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineWidth","o","plus","randomR","Hero","level","type","step","killNumber","startSpecialMove","position","fillStyle","fill","textAlign","fillText","_x","_y","GrapeshotHero","specialLength","nullHero","cycle","bullets","PI","targetY","SpecialLightningBullet","_color","_lightColor","LightningHero","targets","chain","end","targetMaxLength","smallNum","addTarget","getRandomEnemy","parent","_chain","SniperBullet","damage","startPoint","targetPoint","len","SniperHero","target","specialTargets","specialDamage","specialDamageMax","maxEnemy","get","isPicked","filter","renderTarget","radius","arc","Enemy","n","score","removeEnemy","Round1","waveNumber","symbolLife","ceil","createEnemy","font","stageNumber","isMobile","test","window","navigator","userAgent","createStages","Game","offStageHeros","onStageHeros","innerHeight","innerWidth","sizeRate","targetLineLeft","targetLineRight","offStageHeroY","onStageHeroY","heroPosList","setEnd","setRound","$","HP","renderHP","_round","stage","isRenderStrategy","isMouseDown","mouseSelectItem","mouseSelectItemType","mouseSelectItemIndex","mouseSelectItemPosition","mouseSelectItemOffset","canvas","handleMouseMove","bind","handleTouchMove","newRound","goFighting","reset","round","render","bullet","_bullet","addOffStageHero","go","setResult","award","requestAnimationFrame","loopRender","getContext","clearRect","strokeRect","renderSymbol","pos","fillRect","renderHpWidth","hpWidth","putImageData","getImageData","rect","isWin","undefined","index","addToOffStage","list","_hero","addOnStageHero","e","findHero","clientX","clientY","addEventListener","stopPropagation","preventDefault","touches","passive","heros","heroIndex","findIndex","isTrue","isPointIn","removeEventListener","handleEventEnd","changedTouches","leftUp","rightDown","targetI","temp","handleMove","grapeshot","name","price","lightning","sniper","createProduct","createProductList","App","canvasRef","useRef","useState","isShopOpen","setIsShopOpen","productList","setProductList","showShopError","setShowShopError","useEffect","current","handler","handleMouseUp","touchEndHandler","handleTouchEnd","ref","className","s","onClick","onTouchStart","handleTouchStart","onMouseDown","handleCanvasMouseDown","info","shopBtn","shopBox","shopList","shopItem","buySuccess","buyHero","shopItemPrice","shopError","gameEndBox","join","restart","restartBtn","startFighting","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.2372f471.chunk.js","sourcesContent":["import { Coordinate } from \"./Coordinate\";\n\nexport class Point {\n    x = 0;\n    y = 0;\n    coordinate: Coordinate;\n\n    constructor(x: number, y: number, coordinate: Coordinate) {\n        this.x = x;\n        this.y = y;\n        this.coordinate = coordinate;\n    }\n\n    toNumber(): [number, number] {\n        return [this.x + this.coordinate.origin[0], this.y + this.coordinate.origin[1]];\n    }\n\n    plus(x: number, y: number) {\n        return new Point(this.x + x, this.y + y, this.coordinate);\n    }\n\n    lengthTo(p: Point): number {\n        let p1 = this.toNumber();\n        let p2 = p.toNumber();\n\n        return ((p1[0] - p2[0])**2 + (p1[1] - p2[1])**2)**0.5;\n    }\n}\n","import { Point } from \"./Point\";\n\nexport class Coordinate {\n    origin: [number, number] = [0, 0];\n\n    constructor(x: number, y: number) {\n        this.origin = [x, y];\n    }\n\n    resetOrigin(origin: Point) {\n        this.origin = origin.toNumber();\n    }\n\n    point(x: number, y: number): Point {\n        return new Point(x, y, this);\n    }\n\n    toPoint(x: number, y: number): Point {\n        return new Point(x - this.origin[0], y - this.origin[1], this);\n    }\n}","import { Point } from \"../Point\";\nimport { Enemy } from \"./Enemy\";\n\nexport class EnemySet {\n    array: (Enemy|null)[] = [];\n    matrix: (Enemy|null)[][] = [];\n    set: Set<Enemy> = new Set();\n\n    reset() {\n        this.array = [];\n        this.matrix = [];\n        this.set = new Set<Enemy>();\n    }\n\n    removeEnemy(enemy: Enemy) {\n        this.set.delete(enemy);\n        this.array = this.array.map(_enemy => {\n            if (_enemy === enemy) return null;\n            return _enemy;\n        });\n        this.matrix = this.matrix.map(row => {\n            return row.map(_enemy => {\n                if (_enemy === enemy) return null;\n                return _enemy;\n            })\n        });\n    }\n\n    forEach(callbackfn: (value: Enemy, value2: Enemy, set: Set<Enemy>) => void) {\n        this.set.forEach(callbackfn);\n    }\n\n    some(predicate: (value: Enemy | null, index: number, array: (Enemy | null)[]) => unknown): boolean {\n        return this.array.some(predicate);\n    }\n\n    push(...items: Enemy[]) {\n        items.forEach(item => this.set.add(item));\n        this.matrix.push(items);\n        return this.array.push(...items);\n    }\n\n    get length(): number {\n        return this.set.size;\n    }\n\n    get(i: number): Enemy | null {\n        return this.array[i];\n    }\n\n    getRandomEnemy(): Enemy {\n        let i = 0;\n        let random = Math.floor(Math.random() * this.length);\n        let k = this.set.keys();\n        let result: Enemy = k.next().value;\n        while (i !== random) {\n            result = k.next().value;\n            i++;\n        }\n        return result;\n    }\n\n    findEnemyByPoint(point: Point): Enemy | null {\n\n        // let result: Enemy | null = null;\n        // this.some(enemy => {\n        //     if (!enemy) return false;\n        //     if (point.x >= enemy.point.x - 2\n        //         && point.y >= enemy.point.y - 2\n        //         && point.x <= enemy.point.x + enemy.size + 2\n        //         && point.y <= enemy.point.y + enemy.size + 2) {\n        //             result = enemy;\n        //             return true;\n        //     }\n        //     return false;\n        // });\n        // return result;\n        // 30 * i + 10 - 2\n        // 30 * i + 10 + enemySize (20) + 2\n        // Math.floor((point.x - 10) / 30)\n        if ((point.x - 8) % 30 > 24) return null;\n        let i = Math.floor((point.x - 10) / 30);\n        if (i < 0 || i > 14) return null;\n        let result: Enemy | null = null;\n        this.matrix.some(row => {\n            let enemy = row[i];\n            if (!enemy) return false;\n            if (enemy.point.y + enemy.size + 2 < point.y) {\n                return true;\n            } else if (enemy.point.y - 2 <= point.y) {\n                result = enemy;\n                return true;\n            }\n            return false;\n        });\n        return result;\n    }\n}\n","import { Game } from \"..\";\nimport { Hero } from \"../Hero/Hero\";\nimport { Point } from \"../Point\";\n\nexport class Bullet {\n    go() {\n\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n\n    }\n}\n\nexport class DefaultBullet extends Bullet {\n    point: Point;\n    game: Game;\n    size = 2;\n    direction = 0;\n    speed = 30;\n    color = 'black';\n\n    isEnd = false;\n\n    hero: Hero;\n\n    constructor(point: Point, direction: number, game: Game, hero: Hero, {\n        speed, color\n    }: {\n        speed?: number;\n        color?: string;\n    }) {\n        super();\n        this.point = point;\n        this.direction = direction;\n        this.game = game;\n        this.hero = hero;\n        speed && (this.speed = speed);\n        color && (this.color = color);\n    }\n\n    go() {\n        for (let i = 0; i < this.speed * 5; i++) {\n            this.point.y -= Math.cos(this.direction);\n            this.point.x += Math.sin(this.direction);\n\n            // let isTrue = this.game.enemySet.some(enemy => {\n            //     if (!enemy) return false;\n            //     if (this.point.x >= enemy.point.x - 2\n            //         && this.point.y >= enemy.point.y - 2\n            //         && this.point.x <= enemy.point.x + enemy.size + 2\n            //         && this.point.y <= enemy.point.y + enemy.size + 2) {\n            //             let isKilled = enemy.hited();\n            //             if (isKilled) {\n            //                 this.hero.addKillNumber();\n            //             }\n            //             this.game.removeBullet(this);\n            //             this.isEnd = true;\n            //             return true;\n            //     }\n            //     return false;\n            // });\n\n            let enemy = this.game.enemySet.findEnemyByPoint(this.point);\n            if (enemy) {\n                let isKilled = enemy.hited();\n                if (isKilled) {\n                    this.hero.addKillNumber();\n                }\n                this.game.removeBullet(this);\n                this.isEnd = true;\n                return;\n            }\n        }\n        if (this.point.y < 0\n            || this.point.y > this.game.height\n            || this.point.x < 0\n            || this.point.x > this.game.width) {\n            this.game.removeBullet(this);\n        }\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        let [x, y] = this.point.toNumber();\n\n        // if (this.isEnd) {\n        //     this.game.removeBullet(this);\n        //     let direction = this.direction + ((Math.random() - 0.5) * 0.4 + 1) * Math.PI;\n        //     ctx.beginPath();\n        //     for (let i = 0; i < 4; i++) {\n        //         let random1 = Math.random();\n        //         let random2 = Math.random();\n        //         direction = this.direction + ((Math.random() - 0.5) * 0.4 + 1) * Math.PI;\n        //         ctx.moveTo(x + Math.sin(direction) * this.speed * random1, y - Math.cos(direction) * this.speed * random1);\n        //         ctx.lineTo(x + Math.sin(direction) * this.speed * random2, y - Math.cos(direction) * this.speed * random2);\n        //         let gnt1 = ctx.createLinearGradient(x, y, x + Math.sin(direction) * this.speed, y - Math.cos(direction) * this.speed);\n        //         gnt1.addColorStop(0,this.color);\n        //         gnt1.addColorStop(1,'white');\n        //         ctx.strokeStyle = gnt1;\n        //     }\n        //     ctx.stroke();\n        //     ctx.closePath();\n        //     return;\n        // }\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x - Math.sin(this.direction) * this.speed, y + Math.cos(this.direction) * this.speed);\n        let gnt1 = ctx.createLinearGradient(x, y, x - Math.sin(this.direction) * this.speed, y + Math.cos(this.direction) * this.speed);\n        gnt1.addColorStop(0,this.color);\n        gnt1.addColorStop(1,'white');\n        ctx.strokeStyle = gnt1;\n        ctx.stroke();\n        ctx.closePath();\n        ctx.strokeStyle = 'black';\n    }\n}\n","import { Point } from \"../Point\";\n\nexport const drawRoundRect = (x: number, y: number, w: number, h: number, r: number, ctx: CanvasRenderingContext2D): void => {\n    if (w < 2 * r) r = w / 2;\n    if (h < 2 * r) r = h / 2;\n    ctx.beginPath();\n    ctx.moveTo(x+r, y);\n    ctx.arcTo(x+w, y, x+w, y+h, r);\n    ctx.arcTo(x+w, y+h, x, y+h, r);\n    ctx.arcTo(x, y+h, x, y, r);\n    ctx.arcTo(x, y, x+w, y, r);\n    ctx.closePath();\n    ctx.stroke();\n}\n\nexport const drawLightning = (p1: Point, p2: Point, ctx: CanvasRenderingContext2D, color?: string, lightColor?: string) => {\n    const [pn1x, pn1y] = p1.toNumber();\n    const [pn2x, pn2y] = p2.toNumber();\n\n    const dx = pn2x - pn1x;\n    const dy = pn2y - pn1y;\n    const l = p1.lengthTo(p2);\n\n    const cos = dx / l;\n    const sin = dy / l;\n\n    ctx.strokeStyle = color || \"white\";\n\n    ctx.shadowColor = lightColor || 'blue';\n    ctx.shadowBlur = 14;\n    ctx.shadowOffsetX = 0;\n    ctx.shadowOffsetY = 0;\n\n\n    ctx.beginPath();\n    ctx.lineWidth = 1;\n    ctx.moveTo(...p1.toNumber());\n    for (let i = 1; i < 5; i++) {\n        let o = p1.plus(dx / 5 * i, dy / 5 * i);\n\n        let randomR = (Math.random() - 0.5) * 60;\n        o = o.plus(randomR * sin, randomR * cos);\n\n        ctx.lineTo(...o.toNumber());\n    }\n    ctx.lineTo(...p2.toNumber());\n    ctx.stroke();\n    ctx.closePath();\n\n    ctx.beginPath();\n    ctx.lineWidth = 2;\n    ctx.moveTo(...p1.toNumber());\n    for (let i = 1; i < 5; i++) {\n        let o = p1.plus(dx / 5 * i, dy / 5 * i);\n\n        let randomR = (Math.random() - 0.5) * 60;\n        o = o.plus(randomR * sin, randomR * cos);\n\n        ctx.lineTo(...o.toNumber());\n    }\n    ctx.lineTo(...p2.toNumber());\n    ctx.stroke();\n    ctx.closePath();\n\n    ctx.shadowBlur = 0;\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"black\";\n}","import { Game } from \"..\";\nimport { Point } from \"../Point\";\nimport { drawRoundRect } from \"../tool\";\n\nexport class Hero {\n    point: Point;\n    level: 1|2|3 = 1;\n    get size() {\n        switch (this.level) {\n            case 1:\n                return 30;\n            case 2:\n                return 30;\n            default:\n            case 3:\n                return 30;\n        }\n    }\n    color = 'blue';\n    type = 'hero';\n\n    step = 0;\n\n    killNumber = 0;\n\n    game: Game;\n\n    constructor(game: Game) {\n        this.game = game;\n        this.point = new Point(0, 0, game.coordinate);\n    }\n\n    addKillNumber() {\n        this.killNumber++;\n        if (this.killNumber >= 100) {\n            this.killNumber = 0;\n            this.startSpecialMove();\n        }\n    }\n\n    startSpecialMove() {\n\n    }\n\n    go() {\n        this.step++;\n    }\n\n    render(ctx: CanvasRenderingContext2D, position?: [number, number]) {\n        let [x, y] = position || this.point.toNumber();\n        ctx.strokeStyle = this.color;\n        drawRoundRect(x, y, this.size, this.size, 5, ctx);\n        ctx.strokeStyle = 'black';\n        ctx.fillStyle = 'white';\n        ctx.fill();\n        ctx.fillStyle = this.color;\n        ctx.textAlign = 'center';\n        ctx.fillText(`${this.level}`, x + this.size / 2, y + 18);\n        ctx.fillStyle = 'green';\n        ctx.strokeStyle = 'green';\n        drawRoundRect(x + 1, y + this.size + 3, this.killNumber / 100 * (this.size - 2), 2, 1, ctx);\n        ctx.fill();\n        ctx.strokeStyle = 'black';\n        ctx.fillStyle = 'white';\n        ctx.fillStyle = 'black';\n    }\n\n    isPointIn(x: number, y: number) {\n        let [_x, _y] = this.point.toNumber();\n        return x >= _x - 10 && x <= _x + this.size + 10\n            && y >= _y - 10 && y <= _y + this.size + 10;\n    }\n\n    addToOffStage(position: 0|1|2|3|4|5|6|7|8) {\n    }\n}","import { DefaultBullet } from \"../Bullet/Bullet\";\nimport { Point } from \"../Point\";\nimport { Hero } from \"./Hero\";\n\nexport class GrapeshotHero extends Hero {\n    type = 'grapeshot-hero';\n    get cycle() {\n        switch (this.level) {\n            case 1:\n                return 5;\n            case 2:\n                return 3;\n            default:\n            case 3:\n                return 1;\n        }\n    }\n    color = 'black';\n    specialLength = 0;\n\n    nullHero = new Hero(this.game);\n\n    go() {\n        if (this.step % this.cycle === 0) {\n            for (let i = 0; i < 5; i++) {\n                this.game.bullets.push(\n                    new DefaultBullet(\n                        this.point.plus(this.size/2, 0),\n                        Math.PI*0.4*(Math.random() - 0.5),\n                        this.game,\n                        this,\n                        {\n                            speed: 30 + Math.floor(Math.random() * 30),\n                        }\n                    )\n                );\n            }\n        }\n        if (this.specialLength !== 0) {\n            if (this.specialLength % 3 === 0) {\n                for (let i = 0; i < 15; i++) {\n                    this.game.bullets.push(\n                        new DefaultBullet(\n                            new Point(30 * i + 10, this.game.targetY, this.game.coordinate),\n                            0,\n                            this.game,\n                            this.nullHero,\n                            {\n                                speed: 30 + Math.floor(Math.random() * 30),\n                                color: 'red',\n                            }\n                        )\n                    );\n                }\n            }\n            this.specialLength--;\n        }\n        this.step++;\n    }\n\n    startSpecialMove() {\n        this.specialLength = 200;\n    }\n}\n\n","import { Game } from \"..\";\nimport { LightningHero } from \"../Hero/LightningHero\";\nimport { Point } from \"../Point\";\nimport { drawLightning } from \"../tool\";\nimport { Bullet } from \"./Bullet\";\n\nexport class SpecialLightningBullet extends Bullet {\n    game: Game;\n    hero: LightningHero;\n    y = 0;\n    get speed() {\n        switch (this.hero.level) {\n            case 1:\n                return 5;\n            case 2:\n                return 3;\n            case 3:\n            default:\n                return 1;\n        }\n    }\n\n    constructor(game: Game, hero: LightningHero) {\n        super();\n        this.game = game;\n        this.hero = hero;\n        this.y = this.game.targetY;\n    }\n    go() {\n        this.y -= this.speed;\n        this.game.enemySet.forEach(enemy => {\n            if (enemy.point.y <= this.y && enemy.point.y + enemy.size >= this.y) {\n                enemy.hited();\n            }\n        });\n\n        if (this.y <= 0) {\n            this.game.removeBullet(this);\n        }\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        drawLightning(\n            new Point(0, this.y, this.game.coordinate),\n            new Point(this.game.width, this.y, this.game.coordinate),\n            ctx,\n            this.hero._color,\n            this.hero._lightColor);\n    }\n}","import { SpecialLightningBullet } from '../Bullet/SpecialLightningBullet';\nimport { Enemy } from '../Enemy/Enemy';\nimport { drawLightning } from '../tool';\nimport { Hero } from './Hero';\n\ninterface Chain<T> {\n    value: T;\n    next: Chain<T> | null;\n}\n\nexport class LightningHero extends Hero {\n    type = 'lightning-hero';\n\n    targets: {\n        length: number;\n        chain: Chain<Enemy> | null;\n        end: Chain<Enemy> | null;\n    } = {\n        length: 0,\n        chain: null,\n        end: null\n    };\n    get cycle() {\n        switch (this.level) {\n            case 1:\n                return 3;\n            case 2:\n                return 2;\n            default:\n            case 3:\n                return 1;\n        }\n    }\n    get _color() {\n        switch (this.level) {\n            case 1:\n                return 'white';\n            case 2:\n                return 'white';\n            default:\n            case 3:\n                return 'black';\n        }\n    }\n    get _lightColor() {\n        switch (this.level) {\n            case 1:\n                return 'blue';\n            case 2:\n                return 'red';\n            default:\n            case 3:\n                return 'red';\n        }\n    }\n    get targetMaxLength() {\n        switch (this.level) {\n            case 1:\n                return 2;\n            case 2:\n                return 3;\n            default:\n            case 3:\n                return 5;\n        }\n    }\n\n    go() {\n        if (this.targets.length < this.targetMaxLength && this.game.enemySet.length > 0) {\n            let smallNum = this.game.enemySet.length >= this.targetMaxLength ? this.targetMaxLength : this.game.enemySet.length;\n            let i = smallNum - this.targets.length;\n            while (i > 0) {\n                let chain = this.targets.chain;\n\n                if (!chain) {\n                    this.addTarget({\n                        value: this.game.enemySet.getRandomEnemy(),\n                        next: null\n                    });\n                    i--;\n                    continue;\n                }\n\n                const isTrue = this.addTarget({\n                    value: this.game.enemySet.getRandomEnemy(),\n                    next: null\n                });\n                if (isTrue) {\n                    i--;\n                }\n            }\n            this.targets.length = smallNum;\n        }\n\n        if (this.step % this.cycle === 0) {\n            let chain = this.targets.chain;\n            while (chain) {\n                if (chain.value.value > 0) {\n                    let isKilled = chain.value.hited();\n                    if (isKilled) {\n                        this.addKillNumber();\n                    }\n                }\n                chain = chain.next;\n            }\n            chain = this.targets.chain;\n            if (!chain) return;\n            if (chain.value.value <= 0) {\n                this.targets.length = 0;\n                this.targets.chain = null;\n                this.targets.end = null;\n            } else {\n                let parent = chain;\n                chain = chain.next;\n                let length = 1;\n\n                while (chain) {\n                    if (chain.value.value <= 0) {\n                        parent.next = null;\n                        this.targets.length = length;\n                        this.targets.end = parent;\n                        break;\n                    } else {\n                        parent = chain;\n                        chain = chain.next;\n                        length++;\n                    }\n                }\n            }\n        }\n\n        this.step++;\n    }\n\n    render(ctx: CanvasRenderingContext2D, position?: [number, number]) {\n        super.render(ctx, position);\n\n        if (!this.targets.chain) return;\n        let chain: Chain<Enemy> | null = this.targets.chain;\n        let p1 = this.point.plus(this.size / 2, 0);\n\n        while (chain) {\n            let p2 = chain.value.point.plus(chain.value.size / 2, chain.value.size / 2);\n            drawLightning(p1, p2, ctx, this._color, this._lightColor);\n\n            p1 = chain.value.point.plus(chain.value.size / 2, chain.value.size / 2);\n            chain = chain.next;\n        }\n    }\n\n    startSpecialMove() {\n        this.game.bullets.push(new SpecialLightningBullet(this.game, this));\n    }\n\n    addTarget(chain: Chain<Enemy>): boolean {\n        if (this.targets.end === null) {\n            this.targets.chain = chain;\n            this.targets.end = chain;\n            this.targets.length++;\n        } else {\n            let _chain = this.targets.chain;\n\n            while (_chain) {\n\n                if (chain.value === _chain.value) {\n                    return false;\n                }\n                _chain = _chain.next;\n            }\n            this.targets.end.next = chain;\n            this.targets.end = this.targets.end.next;\n            this.targets.length++;\n        }\n\n        return true;\n    }\n\n    addToOffStage(position: 0|1|2|3|4|5|6|7|8) {\n        super.addToOffStage(position);\n        this.targets = {\n            length: 0,\n            chain: null,\n            end: null\n        }\n    }\n}","import { Game } from \"..\";\nimport { Hero } from \"../Hero/Hero\";\nimport { Point } from \"../Point\";\nimport { Bullet } from \"./Bullet\";\n\nexport class SniperBullet extends Bullet {\n    point: Point;\n    startPoint: Point;\n    targetPoint: Point;\n    game: Game;\n    hero: Hero;\n    damage = 0;\n\n    sin = 0;\n    cos = 0;\n\n    speed = 30;\n    color = 'black';\n\n    constructor(game: Game, hero: Hero, p1: Point, p2: Point, {\n        speed, color, damage\n    }: {\n        speed?: number;\n        color?: string;\n        damage: number;\n    }) {\n        super();\n\n        this.game = game;\n        this.hero = hero;\n        this.startPoint = p1;\n        this.point = p1.plus(0, 0);\n        this.targetPoint = p2;\n        speed && (this.speed = speed);\n        color && (this.color = color);\n        this.damage = damage;\n        let dy = this.targetPoint.y - this.startPoint.y;\n        let dx = this.targetPoint.x - this.startPoint.x;\n        let len = (dy**2 + dx**2)**0.5;\n        this.sin = dx / len;\n        this.cos = -dy / len;\n    }\n\n    go() {\n        for (let i = 0; i < this.speed * 5; i++) {\n            this.point.y += -this.cos;\n            this.point.x += this.sin;\n\n            // this.game.enemySet.some(enemy => {\n            //     if (!enemy) return false;\n            //     if (this.point.x >= enemy.point.x - 2\n            //         && this.point.y >= enemy.point.y - 2\n            //         && this.point.x <= enemy.point.x + enemy.size + 2\n            //         && this.point.y <= enemy.point.y + enemy.size + 2) {\n            //             let isKilled = enemy.hited(this.damage);\n            //             if (isKilled) {\n            //                 this.hero.addKillNumber();\n            //             }\n            //             return true;\n            //     }\n            //     return false;\n            // });\n            let enemy = this.game.enemySet.findEnemyByPoint(this.point);\n            if (enemy) {\n                let isKilled = enemy.hited(this.damage);\n                if (isKilled) {\n                    this.hero.addKillNumber();\n                }\n            }\n        }\n        if (this.point.y < 0\n            || this.point.y > this.game.height\n            || this.point.x < 0\n            || this.point.x > this.game.width) {\n            this.game.removeBullet(this);\n        }\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        let [x, y] = this.point.toNumber();\n        ctx.beginPath();\n        ctx.moveTo(x, y);\n        ctx.lineTo(x - this.sin * 150, y + this.cos * 150);\n        let gnt1 = ctx.createLinearGradient(x, y, x - this.sin * 150, y + this.cos * 150);\n        gnt1.addColorStop(0,this.color);\n        gnt1.addColorStop(1,'white');\n        ctx.strokeStyle = gnt1;\n        ctx.lineWidth = 2;\n        ctx.stroke();\n        ctx.closePath();\n        ctx.strokeStyle = 'black';\n        ctx.lineWidth = 1;\n    }\n}","import { SniperBullet } from \"../Bullet/SniperBullet\";\nimport { Enemy } from \"../Enemy/Enemy\";\nimport { Hero } from \"./Hero\";\n\nexport class SniperHero extends Hero {\n    type = 'sniper-hero';\n    target: Enemy|null = null;\n    damage = 0;\n    color = 'green';\n    nullHero = new Hero(this.game);\n\n    specialTargets: Enemy[] = [];\n    specialDamage = -1;\n    specialDamageMax = 30;\n\n    get cycle() {\n        switch (this.level) {\n            case 1:\n                return 5;\n            case 2:\n                return 3;\n            default:\n            case 3:\n                return 2;\n        }\n    }\n\n    go() {\n        if (!this.target) {\n            let maxEnemy: Enemy | null = this.game.enemySet.get(0);\n            this.game.enemySet.forEach(enemy => {\n                if (!maxEnemy || (!enemy.isPicked && enemy.value > maxEnemy.value)) {\n                    maxEnemy = enemy;\n                }\n            });\n\n            if (!maxEnemy) {\n                return super.go();\n            }\n\n            this.target = maxEnemy;\n            this.target.isPicked = true;\n        }\n        if (this.step % this.cycle !== 0) return super.go();\n\n        if (this.damage < this.target.value) {\n            this.damage += 1;\n        } else {\n            this.game.bullets.push(new SniperBullet(\n                this.game,\n                this,\n                this.point.plus(this.size / 2, 0),\n                this.target.point.plus(this.target.size / 2, this.target.size / 2),\n                {\n                    damage: this.damage,\n                }\n            ));\n            this.damage = 0;\n            this.target.isPicked = false;\n            this.target = null;\n        }\n\n        if (this.specialDamage > 0) {\n            this.specialDamage++;\n            this.specialTargets = this.specialTargets.filter(target => {\n                return target.value > 0;\n            });\n\n            if (this.specialDamage >= this.specialDamageMax) {\n                this.specialTargets.forEach(target => {\n                    this.game.bullets.push(new SniperBullet(\n                        this.game,\n                        this.nullHero,\n                        this.point.plus(this.size / 2, 0),\n                        target.point.plus(target.size / 2, target.size / 2),\n                        {\n                            damage: this.specialDamage,\n                        }\n                    ));\n                });\n                this.specialDamage = -1;\n                this.specialTargets = [];\n            }\n        }\n\n        super.go();\n    }\n\n    startSpecialMove() {\n        let set = new Set<Enemy>();\n        let length = this.game.enemySet.length;\n        while (set.size < (length < 12 ? length : 12)) {\n            set.add(this.game.enemySet.getRandomEnemy());\n        }\n\n        set.forEach(enemy => {\n            this.specialTargets.push(enemy);\n        });\n\n        this.specialDamage = 1;\n    }\n\n    render(ctx: CanvasRenderingContext2D, position?: [number, number]) {\n        super.render(ctx, position);\n        if (this.target) {\n            this.renderTarget(ctx, this.target, 5 + (this.target.value - this.damage > 0 ? this.target.value - this.damage : 0));\n        }\n        this.specialTargets.forEach(target => {\n            this.renderTarget(ctx, target, 5 + this.specialDamageMax - this.specialDamage);\n        });\n    }\n\n    renderTarget(ctx: CanvasRenderingContext2D, target: Enemy, radius: number) {\n        if (target.value <= 0) return;\n        ctx.strokeStyle = 'red';\n        ctx.lineWidth = 3;\n        ctx.beginPath();\n        ctx.arc(\n            ...target.point.plus(target.size / 2, target.size / 2).toNumber(),\n            radius, 0, 2*Math.PI);\n        ctx.moveTo(...target.point.plus(target.size / 2, target.size / 2 + radius + 5).toNumber());\n        ctx.lineTo(...target.point.plus(target.size / 2, target.size / 2 + radius - 5).toNumber());\n        ctx.moveTo(...target.point.plus(target.size / 2, target.size / 2 - radius + 5).toNumber());\n        ctx.lineTo(...target.point.plus(target.size / 2, target.size / 2 - radius - 5).toNumber());\n        ctx.moveTo(...target.point.plus(target.size / 2 + radius + 5, target.size / 2).toNumber());\n        ctx.lineTo(...target.point.plus(target.size / 2 + radius - 5, target.size / 2).toNumber());\n        ctx.moveTo(...target.point.plus(target.size / 2 - radius + 5, target.size / 2).toNumber());\n        ctx.lineTo(...target.point.plus(target.size / 2 - radius - 5, target.size / 2).toNumber());\n        ctx.stroke();\n        ctx.closePath();\n        ctx.strokeStyle = 'black';\n        ctx.lineWidth = 1;\n    }\n}","import { Game } from \"..\";\nimport { Point } from \"../Point\";\nimport { drawRoundRect } from \"../tool\";\n\nexport class Enemy {\n    value = 0;\n    size = 20;\n    point: Point;\n    game: Game;\n\n    isPicked = false;\n\n    constructor(value: number, x: number, game: Game) {\n        this.value = value;\n        this.game = game;\n        this.point = new Point(x, -this.size, game.coordinate);\n    }\n\n    go() {\n        this.point.y += 0.5;\n    }\n\n    hited(n?: number): boolean {\n        if (n) {\n            this.game.score += this.value < n ? this.value : n;\n            this.value -= n;\n        } else {\n            this.value--;\n            this.game.score++;\n        }\n\n        if (this.value <= 0) {\n            this.game.removeEnemy(this);\n            return true;\n        }\n        return false;\n    }\n\n    render(ctx: CanvasRenderingContext2D) {\n        let [x, y] = this.point.toNumber();\n        drawRoundRect(x, y, this.size, this.size, 5, ctx);\n        ctx.textAlign = 'center';\n        ctx.fillText(`${this.value}`, x + this.size / 2, y + 13);\n    }\n}\n","import { Game } from \"..\";\nimport { Enemy } from \"../Enemy/Enemy\";\nimport { Round } from \"./Round\";\n\nexport class Round1 implements Round {\n    game: Game;\n    waveNumber = 30;\n\n    symbolLife = 100;\n\n    isEnd = false;\n\n    constructor(game: Game) {\n        this.game = game;\n    }\n\n    createEnemy() {\n        let row: Enemy[] = [];\n        for (let i = 0; i < 15; i++) {\n            row.push(new Enemy(Math.ceil(this.game.step/150*Math.random() + 1), 30 * i + 10, this.game));\n        }\n        this.game.enemySet.push(...row);\n    }\n\n    go() {\n        if (this.waveNumber === 0) {\n            this.isEnd = true;\n            return;\n        }\n        if (this.game.step % this.game.cycle === 0) {\n            this.createEnemy();\n            this.waveNumber--;\n        }\n    }\n\n    award() {\n\n    }\n\n    renderSymbol(ctx: CanvasRenderingContext2D) {\n        ctx.beginPath();\n        ctx.font = 'italic bolder 60px Arial';\n        ctx.fillStyle = 'grey';\n        ctx.textAlign = 'center';\n        ctx.fillText(`ROUND ${this.game.stageNumber + 1}`, this.game.width / 2, this.game.height - 350);\n        ctx.font = '12px Arial';\n        ctx.fillStyle = 'black';\n        ctx.closePath();\n    }\n}\n","import { Bullet } from \"./Bullet/Bullet\";\nimport { Coordinate } from \"./Coordinate\";\nimport { Enemy } from \"./Enemy/Enemy\";\nimport { EnemySet } from \"./Enemy/EnemySet\";\nimport { GrapeshotHero } from \"./Hero/GrapeshotHero\";\nimport { Hero } from \"./Hero/Hero\";\nimport { LightningHero } from \"./Hero/LightningHero\";\nimport { SniperHero } from \"./Hero/SniperHero\";\nimport { Point } from \"./Point\";\nimport { Round1 } from \"./Round/Round1\";\nimport { drawRoundRect } from \"./tool\";\n\nconst isMobile = /Android|webOS|iPhone|iPod|BlackBerry/i.test(window.navigator.userAgent);\nconst createStages = (game: Game) => {\n    return [\n        new Round1(game),\n        new Round1(game),\n        new Round1(game),\n        new Round1(game),\n        new Round1(game),\n        new Round1(game),\n        new Round1(game)\n    ];\n}\n\nexport class Game {\n    coordinate = new Coordinate(0, 0);\n\n    // enemys: Enemy[] = [];\n    enemySet = new EnemySet();\n\n    offStageHeros: [\n        Hero|null, Hero|null, Hero|null,\n        Hero|null, Hero|null, Hero|null,\n        Hero|null, Hero|null, Hero|null\n    ] = [null, null, null, null, null, null, null, null, null];\n    onStageHeros: [\n        Hero|null, Hero|null, Hero|null,\n        Hero|null, Hero|null, Hero|null,\n        Hero|null, Hero|null, Hero|null\n    ] = [null, null, null, null, null, null, null, null, null];\n\n    bullets: Bullet[] = [];\n\n    width = 460;\n    height = window.innerHeight * 460 / window.innerWidth;\n    sizeRate = 460 / window.innerWidth;\n\n    targetY = this.height - 150;\n    targetLineLeft = this.coordinate.point(0, this.targetY);\n    targetLineRight = this.coordinate.point(this.width, this.targetY);\n\n    offStageHeroY = this.height - 70;\n    onStageHeroY = this.height - 120;\n    // 数组顺序不要动\n    heroPosList = [\n        new Point(55, this.offStageHeroY, this.coordinate),\n        new Point(95, this.offStageHeroY, this.coordinate),\n        new Point(135, this.offStageHeroY, this.coordinate),\n        new Point(175, this.offStageHeroY, this.coordinate),\n        new Point(215, this.offStageHeroY, this.coordinate),\n        new Point(255, this.offStageHeroY, this.coordinate),\n        new Point(295, this.offStageHeroY, this.coordinate),\n        new Point(335, this.offStageHeroY, this.coordinate),\n        new Point(375, this.offStageHeroY, this.coordinate),\n\n        new Point(55, this.onStageHeroY, this.coordinate),\n        new Point(95, this.onStageHeroY, this.coordinate),\n        new Point(135, this.onStageHeroY, this.coordinate),\n        new Point(175, this.onStageHeroY, this.coordinate),\n        new Point(215, this.onStageHeroY, this.coordinate),\n        new Point(255, this.onStageHeroY, this.coordinate),\n        new Point(295, this.onStageHeroY, this.coordinate),\n        new Point(335, this.onStageHeroY, this.coordinate),\n        new Point(375, this.onStageHeroY, this.coordinate)\n    ];\n\n    cycle = 60;\n    step = 0;\n    setEnd: React.Dispatch<React.SetStateAction<boolean>> | null = null;\n    setRound: React.Dispatch<React.SetStateAction<'strategy' | 'fighting'>> | null = null;\n\n    $ = 300;\n    score = 0;\n\n    HP = 1000;\n    renderHP = 1000;\n    result: 'win' | 'loose' = 'win';\n    private _round: 'strategy' | 'fighting' = 'strategy';\n    get round() {\n        return this._round;\n    }\n    set round(newRound: 'strategy' | 'fighting') {\n        this._round = newRound;\n        if (this.setRound) this.setRound(newRound);\n        if (newRound === 'fighting') {\n            this.goFighting();\n        }\n    }\n    stageNumber = 0;\n    stage = createStages(this);\n\n    isRenderStrategy = false;\n\n    isMouseDown = false;\n    mouseSelectItem: Hero | null = null;\n    mouseSelectItemType: 'off' | 'on' = 'off';\n    mouseSelectItemIndex: 0|1|2|3|4|5|6|7|8 = 0;\n    mouseSelectItemPosition: [number, number] = [0, 0];\n    mouseSelectItemOffset: [number, number] = [0, 0];\n\n    canvas: HTMLCanvasElement | null = null;\n\n    constructor() {\n        this.handleMouseMove = this.handleMouseMove.bind(this);\n        this.handleTouchMove = this.handleTouchMove.bind(this);\n    }\n\n    restart() {\n        // this.enemys = [];\n        this.enemySet.reset();\n        this.offStageHeros = [null, null, null, null, null, null, null, null, null];\n        this.onStageHeros = [null, null, null, null, null, null, null, null, null];\n        this.bullets = [];\n        this.step = 0;\n        this.$ = 300;\n        this.score = 0;\n        this.HP = 1000;\n\n        this.stageNumber = 0;\n        this.round = 'strategy';\n        this.stage = createStages(this);\n        this.render();\n    }\n\n    removeBullet(bullet: Bullet) {\n        this.bullets = this.bullets.filter(_bullet => {\n            return _bullet !== bullet;\n        });\n    }\n\n    removeEnemy(enemy: Enemy) {\n        this.enemySet.removeEnemy(enemy);\n        this.$++;\n    }\n\n    buyHero(type: 'lightning' | 'grapeshot' | 'sniper'): boolean {\n        switch (type) {\n            case 'lightning':\n                if (this.$ < 300) return false;\n                this.$ -= 300;\n                this.addOffStageHero(new LightningHero(this));\n                break;\n            case 'sniper':\n                if (this.$ < 200) return false;\n                this.$ -= 200;\n                this.addOffStageHero(new SniperHero(this));\n                break;\n            case 'grapeshot':\n            default:\n                if (this.$ < 300) return false;\n                this.$ -= 300;\n                this.addOffStageHero(new GrapeshotHero(this));\n                break;\n        }\n        this.render();\n        return true;\n    }\n\n    go(): boolean {\n        this.stage[this.stageNumber].go();\n\n        this.enemySet.forEach(enemy => {\n            enemy.go();\n            if (enemy.point.y >= this.targetY - enemy.size) {\n                this.removeEnemy(enemy);\n                this.HP -= enemy.value > this.HP ? this.HP : enemy.value;\n            }\n        });\n\n        this.onStageHeros.forEach(hero => {\n            hero?.go();\n        });\n\n        this.bullets.forEach(bullet => {\n            bullet.go();\n        });\n\n        if (this.renderHP > this.HP) {\n            this.renderHP--;\n        } else if (this.renderHP < this.HP) {\n            this.renderHP++\n        }\n\n        this.step++;\n        return this.HP <= 0;\n    }\n\n    goFighting() {\n        let isEnd = this.go();\n\n        this.render();\n        if (isEnd) {\n            this.setResult('loose');\n            this.render();\n            return;\n        }\n\n        if (this.stage[this.stageNumber].isEnd\n            && this.bullets.length === 0\n            && this.enemySet.length === 0\n            && this.renderHP === this.HP) {\n            this.round = 'strategy';\n            this.stageNumber++;\n\n            if (this.stageNumber === this.stage.length) {\n                this.setResult('win');\n                this.render();\n                return;\n            }\n\n            this.stage[this.stageNumber].award();\n            this.render();\n            return;\n        }\n        requestAnimationFrame(() => {\n            this.goFighting();\n        });\n    }\n\n    goStrategy() {\n        if (this.isRenderStrategy) return;\n        this.loopRender();\n    }\n\n    loopRender() {\n        this.render();\n\n        if (!this.isRenderStrategy) {\n            return;\n        }\n        requestAnimationFrame(() => {\n            this.loopRender();\n        });\n    }\n\n    render() {\n        if (!this.canvas) return;\n        const ctx = this.canvas.getContext('2d');\n\n        if (!ctx) return;\n\n        ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.strokeRect(...this.coordinate.origin, this.width, this.height);\n\n        this.stage[this.stageNumber]?.renderSymbol(ctx);\n\n        ctx.beginPath();\n        ctx.strokeStyle = 'grey';\n        this.heroPosList.forEach(pos => {\n            drawRoundRect(...pos.plus(8, 8).toNumber(), 14, 14, 5, ctx);\n        });\n        ctx.strokeStyle = 'black';\n        ctx.closePath();\n\n        this.enemySet.forEach(enemy => {\n            enemy.render(ctx);\n        });\n\n        // HP条\n        ctx.beginPath();\n        ctx.fillStyle = 'white';        \n        ctx.fillRect(1, this.targetY - 30, this.width - 2, 32);\n        ctx.fillStyle = 'lightgrey';\n        ctx.fillRect(1, this.targetY - 25, this.width - 2, 10);\n        ctx.fillStyle = 'lightgreen';\n        ctx.strokeStyle = 'green';\n        const renderHpWidth = this.renderHP / 1000 * (this.width - 2);\n        ctx.fillRect(this.width - renderHpWidth - 1, this.targetY - 25, renderHpWidth, 10);\n        ctx.fillStyle = '#00CC33';\n        const hpWidth = this.HP / 1000 * (this.width - 2);\n        ctx.fillRect(this.width - hpWidth - 1, this.targetY - 25, hpWidth, 10);\n        ctx.closePath();\n        ctx.fillStyle = 'black';\n        ctx.strokeStyle = 'black';\n\n        ctx.beginPath();\n        this.offStageHeros.forEach(hero => {\n            hero?.render(ctx);\n        });\n\n        this.onStageHeros.forEach(hero => {\n            hero?.render(ctx);\n        });\n        ctx.closePath();\n\n        ctx.beginPath();\n        ctx.moveTo(...this.targetLineLeft.plus(0, -30).toNumber());\n        ctx.lineTo(...this.targetLineRight.plus(0, -30).toNumber());\n        ctx.stroke();\n        ctx.closePath();\n\n        ctx.beginPath();\n        this.bullets.forEach(bullet => {\n            bullet.render(ctx);\n        });\n        ctx.closePath();\n\n        if (this.mouseSelectItem) {\n            this.mouseSelectItem.render(ctx, [\n                this.mouseSelectItemPosition[0] + this.mouseSelectItemOffset[0],\n                this.mouseSelectItemPosition[1] + this.mouseSelectItemOffset[1],\n            ]);\n            if (isMobile) {\n                ctx.putImageData(ctx.getImageData(\n                    0, this.targetY, this.width, 150\n                ), 0, this.targetY - 150);\n\n                ctx.rect(0, this.targetY - 150, this.width, 150);\n                ctx.stroke();\n            }\n        }\n\n        ctx.beginPath();\n        ctx.font = 'bold 24px Arial';\n        ctx.fillStyle = 'red';\n        ctx.textAlign = 'right';\n        ctx.fillText(`$:${this.$}`, 440, 30);\n        ctx.font = '12px Arial';\n        ctx.fillStyle = 'black';\n        ctx.closePath();\n\n        ctx.beginPath();\n        ctx.font = 'bold 24px Arial';\n        ctx.fillStyle = 'red';\n        ctx.textAlign = 'left';\n        ctx.fillText(`score:${this.score}`, 20, 30);\n        ctx.font = '12px Arial';\n        ctx.fillStyle = 'black';\n        ctx.closePath();\n\n    }\n\n    setResult(isWin: 'win' | 'loose') {\n        this.result = isWin;\n        this.setEnd && this.setEnd(true);\n    }\n\n    addOffStageHero(hero: Hero | null, position?: 0|1|2|3|4|5|6|7|8) {\n        if (position === undefined) {\n            this.offStageHeros.some((hero, index) => {\n                if (hero === null) {\n                    position = index as 0|1|2|3|4|5|6|7|8;\n                    return true;\n                }\n                return false;\n            });\n        }\n        if (position === undefined) return;\n        this.offStageHeros[position] = hero;\n        if (hero) {\n            hero.point.y = this.offStageHeroY;\n            hero.point.x = 55 + position * 40;\n            hero.addToOffStage(position);\n\n            if (hero.level >= 3) return;\n\n            let list: (0|1|2|3|4|5|6|7|8)[] = [];\n            this.offStageHeros.forEach((_hero, i) => {\n                if (_hero?.type === hero.type && hero.level === _hero.level) {\n                    list.push(i as 0);\n                }\n            });\n\n            if (list.length >= 3) {\n                this.addOffStageHero(null, list[0]);\n                this.addOffStageHero(null, list[1]);\n                (this.offStageHeros[list[2]] as Hero).level += 1;\n                this.addOffStageHero(this.offStageHeros[list[2]], list[2]);\n            }\n        }\n    }\n\n    addOnStageHero(hero: Hero | null, position?: 0|1|2|3|4|5|6|7|8) {\n        if (position === undefined) {\n            this.onStageHeros.some((hero, index) => {\n                if (hero === null) {\n                    position = index as 0|1|2|3|4|5|6|7|8;\n                    return true;\n                }\n                return false;\n            });\n        }\n        if (position === undefined) return;\n        this.onStageHeros[position] = hero;\n        if (hero) {\n            hero.point.y = this.onStageHeroY;\n            hero.point.x = 55 + position * 40;\n\n            if (hero.level >= 3) return;\n\n            let list: (0|1|2|3|4|5|6|7|8)[] = [];\n            this.onStageHeros.forEach((_hero, i) => {\n                if (_hero?.type === hero.type && hero.level === _hero.level) {\n                    list.push(i as 0);\n                }\n            });\n\n            if (list.length >= 3) {\n                this.addOnStageHero(null, list[0]);\n                this.addOnStageHero(null, list[1]);\n                (this.onStageHeros[list[2]] as Hero).level += 1;\n                this.addOnStageHero(this.onStageHeros[list[2]], list[2]);\n            }\n        }\n    }\n\n    handleCanvasMouseDown(e: React.MouseEvent<HTMLCanvasElement>) {\n        if (this.round === 'fighting') return;\n        this.isMouseDown = true;\n\n        let isFindOffStage = this.findHero(this.offStageHeros, e.clientX, e.clientY, 'off');\n        if (isFindOffStage) {\n            window.addEventListener('mousemove', this.handleMouseMove);\n            this.isRenderStrategy = true;\n            this.loopRender();\n            return;\n        }\n        let isFindOnStage = this.findHero(this.onStageHeros, e.clientX, e.clientY, 'on');\n        if (isFindOnStage) {\n            window.addEventListener('mousemove', this.handleMouseMove);\n            this.isRenderStrategy = true;\n            this.loopRender();\n            return;\n        }\n    }\n\n    handleTouchStart(e: React.TouchEvent<HTMLCanvasElement>) {\n        if (this.round === 'fighting') return;\n        e.stopPropagation();\n        e.preventDefault();\n        this.isMouseDown = true;\n\n        let isFindOffStage = this.findHero(this.offStageHeros, e.touches[0].clientX, e.touches[0].clientY, 'off');\n        if (isFindOffStage) {\n            window.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n            this.isRenderStrategy = true;\n            this.loopRender();\n            return;\n        }\n        let isFindOnStage = this.findHero(this.onStageHeros, e.touches[0].clientX, e.touches[0].clientY, 'on');\n        if (isFindOnStage) {\n            window.addEventListener('touchmove', this.handleTouchMove, { passive: false });\n            this.isRenderStrategy = true;\n            this.loopRender();\n            return;\n        }\n    }\n\n    findHero(heros: (Hero|null)[], clientX: number, clientY: number, type: 'off'|'on'): boolean {\n        let heroIndex = heros.findIndex(hero => {\n            if (!hero) return false;\n\n            let isTrue = hero.isPointIn(clientX * this.sizeRate, clientY * this.sizeRate);\n            if (isTrue) {\n                let o = hero.point.toNumber();\n                this.mouseSelectItemOffset = [\n                    o[0] - clientX * this.sizeRate,\n                    o[1] - clientY * this.sizeRate\n                ];\n            }\n            return isTrue;\n        });\n\n        if (heroIndex !== -1) {\n            this.mouseSelectItem = heros[heroIndex];\n            this.mouseSelectItemType = type;\n            this.mouseSelectItemIndex = heroIndex as 0;\n            this.mouseSelectItemPosition = [clientX * this.sizeRate, clientY * this.sizeRate];\n            return true;\n        }\n        return false;\n    }\n\n    handleMouseUp(e: MouseEvent) {\n        window.removeEventListener('mousemove', this.handleMouseMove);\n        this.handleEventEnd(e.clientX, e.clientY);\n    }\n\n    handleTouchEnd(e: TouchEvent) {\n        window.removeEventListener('touchmove', this.handleTouchMove);\n        this.handleEventEnd(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n    }\n\n    handleEventEnd(clientX: number, clientY: number) {\n        let leftUp = [clientX * this.sizeRate + this.mouseSelectItemOffset[0], clientY * this.sizeRate + this.mouseSelectItemOffset[1]];\n        let rightDown = [leftUp[0] + 30, leftUp[1] + 30];\n\n        let pos = this.heroPosList.findIndex(pos => {\n            let p = pos.toNumber();\n\n            return leftUp[0] > p[0] - 18 && leftUp[1] > p[1] - 18\n                && rightDown[0] < p[0] + 48 && rightDown[1] < p[1] + 48;\n        });\n\n        if (pos !== -1 && this.mouseSelectItem) {\n            if (Math.floor(pos / 9) === 0) { // offStage\n                let targetI = pos % 9;\n                let temp = this.offStageHeros[targetI];\n                this.offStageHeros[targetI] = null;\n                if (this.mouseSelectItemType === 'on') {\n                    this.onStageHeros[this.mouseSelectItemIndex] = null;\n                } else {\n                    this.offStageHeros[this.mouseSelectItemIndex] = null;\n                }\n                this.addOffStageHero(this.mouseSelectItem, targetI as 0);\n                if (this.mouseSelectItemType === 'on') {\n                    this.addOnStageHero(temp, this.mouseSelectItemIndex);\n                } else {\n                    this.addOffStageHero(temp, this.mouseSelectItemIndex);\n                }\n            } else { // onStage\n                let targetI = pos % 9;\n                let temp = this.onStageHeros[targetI];\n                this.onStageHeros[targetI] = null;\n                if (this.mouseSelectItemType === 'on') {\n                    this.onStageHeros[this.mouseSelectItemIndex] = null;\n                } else {\n                    this.offStageHeros[this.mouseSelectItemIndex] = null;\n                }\n                this.addOnStageHero(this.mouseSelectItem, targetI as 0);\n                if (this.mouseSelectItemType === 'on') {\n                    this.addOnStageHero(temp, this.mouseSelectItemIndex);\n                } else {\n                    this.addOffStageHero(temp, this.mouseSelectItemIndex);\n                }\n            }\n        }\n\n        this.isMouseDown = false;\n        this.mouseSelectItem = null;\n        this.isRenderStrategy = false;\n    }\n\n    handleMouseMove(e: MouseEvent) {\n        this.handleMove(e.clientX, e.clientY);\n    }\n\n    handleTouchMove(e: TouchEvent) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.handleMove(e.changedTouches[0].clientX, e.changedTouches[0].clientY);\n    }\n\n    handleMove(clientX: number, clientY: number) {\n        this.mouseSelectItemPosition = [clientX * this.sizeRate, clientY * this.sizeRate];\n    }\n}\n","import React, { useEffect, useRef, useState } from 'react';\nimport { Game } from './core';\nimport s from './App.module.css';\n\nconst game = new Game();\n\nconst grapeshot = {\n    type: 'grapeshot-hero',\n    name: '霰弹',\n    price: 300\n}\n\nconst lightning = {\n    type: 'lightning-hero',\n    name: '闪电',\n    price: 300\n}\n\nconst sniper = {\n    type: 'sniper-hero',\n    name: '狙击手',\n    price: 200\n}\n\nconst createProduct = () => {\n    let r = Math.random();\n\n    if (r < 0.33) {\n        return grapeshot;\n    } else if (r < 0.66) {\n        return lightning;\n    } else {\n        return sniper;\n    }\n}\n\nconst createProductList = () => {\n    return [\n        createProduct(),\n        createProduct(),\n        createProduct(),\n        createProduct(),\n        createProduct()\n    ];\n}\n\nconst App = () => {\n    const canvasRef = useRef<HTMLCanvasElement>(null);\n    const [end, setEnd] = useState(false);\n    const [isShopOpen, setIsShopOpen] = useState(false);\n    const [productList, setProductList] = useState(createProductList());\n    const [showShopError, setShowShopError] = useState(false);\n    const [round, setRound] = useState<'strategy' | 'fighting'>('strategy');\n\n    useEffect(() => {\n        if (!canvasRef.current) return;\n        canvasRef.current.width = game.width;\n        canvasRef.current.height = game.height;\n    }, [canvasRef]);\n\n    useEffect(() => {\n        game.setEnd = setEnd;\n    }, [end]);\n\n    useEffect(() => {\n        game.setRound = setRound;\n    }, [round]);\n\n    useEffect(() => {\n        game.canvas = canvasRef.current;\n        game.render();\n    }, [canvasRef]);\n\n    useEffect(() => {\n        const handler = game.handleMouseUp.bind(game);\n        const touchEndHandler = game.handleTouchEnd.bind(game);\n        window.addEventListener('mouseup', handler);\n        window.addEventListener('touchend', touchEndHandler)\n        return () => {\n            window.removeEventListener('mouseup', handler);\n            window.removeEventListener('touchend', touchEndHandler);\n        }\n    }, []);\n\n    function restart() {\n        game.restart();\n        setEnd(false);\n        game.canvas = canvasRef.current;\n        // game.goFighting();\n    }\n\n    return <>\n        <canvas ref={canvasRef} className={s.canvas}\n            onClick={() => {\n                setIsShopOpen(false);\n                setShowShopError(false);\n            }}\n            onTouchStart={game.handleTouchStart.bind(game)}\n            onMouseDown={game.handleCanvasMouseDown.bind(game)} />\n        <div className={s.info}>\n            <div>\n                <button className={s.shopBtn} onClick={() => {\n                    setIsShopOpen(!isShopOpen);\n                    setShowShopError(false);\n                }}>商店</button>\n                {isShopOpen && <div className={s.shopBox}>\n                    <ul className={s.shopList}>\n                        {productList.map((p, i) => <li className={s.shopItem} key={i} onClick={() => {\n                            let buySuccess = false;\n                            switch (p.type) {\n                                case 'grapeshot-hero':\n                                    buySuccess = game.buyHero('grapeshot');\n                                    break;\n                                case 'sniper-hero':\n                                    buySuccess = game.buyHero('sniper');\n                                    break;\n                                case 'lightning-hero':\n                                default:\n                                    buySuccess = game.buyHero('lightning');\n                                    break;\n                            }\n                            if (!buySuccess) {\n                                setShowShopError(true);\n                                return;\n                            }\n                            setIsShopOpen(false);\n                            setProductList(createProductList());\n                            setShowShopError(false);\n                        }}>\n                            {p.name}\n                            <div className={s.shopItemPrice}>\n                                ${p.price}\n                            </div>\n                        </li>)}\n                    </ul>\n                    {showShopError && <div className={s.shopError}>\n                        钱不够！！！！！！\n                    </div>}\n                </div>}\n            </div>\n            <div className={[s.gameEndBox, end ? s.end : ''].join(' ')}>\n                {game.result === 'win' ? '恭喜🎉' : 'game over'}\n                <button onClick={restart} className={s.restartBtn}>restart</button>\n            </div>\n            <div>\n                {round === 'strategy' && <button className={s.startFighting} onClick={() => {\n                    game.round = 'fighting';\n                }}>开始阻击</button>}\n            </div>\n        </div>\n    </>\n}\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"App_canvas__1KgDx\",\"info\":\"App_info__3tKmE\",\"gameEndBox\":\"App_gameEndBox__e2Cnq\",\"end\":\"App_end__3t3U7\",\"restartBtn\":\"App_restartBtn__2M1an\",\"shopBtn\":\"App_shopBtn__1GjVz\",\"shopBox\":\"App_shopBox__ApMbX\",\"shopList\":\"App_shopList__2OMys\",\"shopItem\":\"App_shopItem__2UEyj\",\"shopItemPrice\":\"App_shopItemPrice__19Ocx\",\"shopError\":\"App_shopError__12I5k\",\"startFighting\":\"App_startFighting__ner9a\"};"],"sourceRoot":""}